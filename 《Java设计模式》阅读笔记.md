# 《Java设计模式》阅读笔记



## 面向对象设计原则

**1、单一职责**

一个类只完成一项工作

**2、开闭原则**

对扩展开放，对修改关闭

**3、里氏代换原则**

所有引用基类的地方必须能透明地使用子类

**4、依赖导致原则**

针对接口编程，而不是针对实现编程，传递参数或者关联关系中，尽量使用高层次的抽象，而具体的实现类则通过配置文件指定

**5、接口隔离原则**

使用多个专门的接口，而不使用单一的总接口，接口不能太大（违反接口隔离原则），接口也不能太小（接口泛滥）

**6、合成复用原则**

尽量使用对象的组合，而不是对象的继承来达到目的

组合/聚合手段能够降低类之间的耦合度，使系统更加灵活

**7、迪米特原则**

一个软件实体应当尽可能少的与其他实体发生相互作用

通过引入一个第三者来降低耦合度

## 六个创建型模式

### 简单工厂模式

步骤：

1. 将不同具体的产品封装到不同的类，将公共代码抽取封装到抽象产品类
2. 提供一个工厂类用于创建不同的产品，提供一个工厂方法根据不同的输入参数创建不同的产品对象



工厂类中用于创建对象的方法为静态方法，所以也称作静态工厂

静态工厂方法中的三种角色：

**工厂、抽象产品、具体产品**

```java
abstract class Product {
    public abstract void methodDiff();
    public void methodSame(){};
}

class ConcreteProduct extends Product {
    public void methodDiff(){};
}

class ProductFactory {
    public Static Product getProduct(String arg) {
        if (arg.equals("")) {
            
        } else if (arg.equals("")) {
            
        }
    }
}
```



客户端通常在创建对象时将输入参数写入properties文件



为了简化上述方式，通常也可将工厂方法写入抽象类中



**简单工厂的一个大问题：当需要扩展新产品的时候，会修改工厂类，违反开闭原则**



### 工厂方法模式

步骤：

1. 通过一个抽象工厂接口来声明抽象工厂方法
2. 子类具体实现相关工厂方法，创建具体的产品类

工厂方法中的**角色**：

抽象产品，具体产品，抽象工厂，具体工厂



实际使用中，具体工厂也可以完成一些对象初始化与资源环境配置工作，例如连接数据库



工厂方法模式的问题：会引入大量的类



### 抽象工厂模式

一个工厂提供多个相关的对象

**产品等级结构**：产品的继承结构，例如 电视机-海尔电视机

**产品族**：同一工厂生产，位于不同产品等级结构中的产品，例如 海尔电视机与海尔电冰箱



抽象工厂模式适用于工厂生产位于多个不同产品结构，属于不同类型的多个产品对象。与工厂方法的区别，工厂方法针对单一的产品结构，而抽象工厂针对于多个产品等级结构，**每一个具体工厂生产一个产品族的产品**



抽象工厂中的角色：

抽象产品，具体产品，抽象工厂，具体工厂



抽象工厂的问题：

增加新的产品族很方便，但是增加新的产品等级结构很困难（修改工厂类代码，客户端代码，不符合开闭原则）